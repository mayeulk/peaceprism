<% if @browser=="ie" %>
<html xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
    <style>
    v\:* { behavior: url(#default#vml); }
    </style>
<% else %><?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<% end %>
    <link rel="stylesheet" type="text/css" href="stylesheets/slider.css"/>
    <link rel="stylesheet" type="text/css" href="stylesheets/carte.css"/>
    <script type="text/ecmascript" src="javascripts/slider/addanevent.js"></script>
    <script type="text/ecmascript" src="javascripts/slider/slider.js"></script>
    <script type="text/ecmascript" src="javascripts/slider/slider-setup.js"></script>
    <script type="text/ecmascript" src="javascripts/donnees_conflits.js"></script>
    <script type="text/ecmascript" src="javascripts/donnees.js"></script>
    <script type="text/ecmascript" src="javascripts/zones_conflits.js"></script>
    <%= javascript_include_tag :defaults %>
    <script type="text/ecmascript">
      //pays_survole="lt14lg78rd700"
      old_pays_survole="France"; //var. globale
        function survol_zone(pays_survole) {
        pays_survole=pays_survole
        document.getElementById(pays_survole).setAttribute("stroke-width", "1");
        document.getElementById(old_pays_survole).setAttribute("stroke-width", "0.25");
        document.getElementById("pays2").value=pays_survole
        old_pays_survole=pays_survole;
        };
      function curseurPays(val, box) {
        var b=document.getElementById('output'+box);
        val=Math.round(val);
        b.value=val;
        //toggle_layer_number(val);
      }
      var pays= new Array ("Serbia", "Slovenia", "Montenegro", "Croatia", "Macedonia", "Bosnia_and_Herzegovina", "Cyprus_1_", "Luxembourg", "United_Arab_Emirates", "Qatar", "Azerbaijan", "Jordan", "Lebanon", "Netherlands", "Belgium", "Canada", "Greenland_1_", "Papua_New_Guinea", "Cambodia", "Vietnam", "Korea_x002C__Democratic_People_x0027_s_Republic_of", "Korea_x002C__Republic_of", "Mongolia", "Kazakhstan", "Taiwan", "Brunei", "Butan", "Bangladesh", "Afghanistan", "Kyrgyzstan", "Burkina_Faso", "Belize", "Indonesia", "Guatemala", "Dominican_Republic", "Burma", "Laos", "Malaysia", "Cuba", "Tajikistan", "Jamaica", "Thailand", "Nepal", "Uzbekistan", "Malawi", "Turkmenistan", "Puerto_Rico", "Russia_2_", "Sri_Lanka", "Nicaragua", "Madagascar", "Zambia", "El_Salvador", "Honduras", "Haiti", "Costa_Rica", "Panama", "Chile", "Bolivia", "Paraguay", "Uruguay", "Peru", "Brazil", "Mexico", "Kenya", "Tanzania", "Mozambique", "Zaire", "Angola", "Namibia", "Congo", "Cameroon", "Gabon", "Equatorial_Guinea", "Botswana", "Zimbabwe", "Uganda", "Burundi", "Guyana", "Suriname", "French_Guiana", "Ecuador", "Colombia", "Venezuela", "Benin", "Ghana", "Togo", "Guinea", "Liberia", "Sierra_Leone", "Nigeria", "Lesotho", "Swaziland", "Ivory_Coast", "Rwanda", "Western_Sahara", "Niger", "Sudan", "Lybia", "Chad", "Mali", "Mauritania", "Tunisia", "Algeria", "Morocco", "India", "New_Zealand", "Argentina", "United_Kingdom_1_", "United_States_1_", "Italy_1_", "Denmark_1_", "Egypt_1_", "South_Africa", "Finland", "France", "Portugal", "Ireland", "Iceland", "Germany", "Poland", "Australia_1_", "Turkey_1_", "Russia", "Saudi_Arabia", "Slovakia", "Spain_1_", "Israel", "Iraq", "Greece", "Romania", "Bulgaria", "Syria", "Albania", "Switzerland", "Czech_Republic", "Austria", "Kuwait", "Iran", "Estonia", "Latvia", "Hungary", "Pakistan", "Sweden", "Lithuania", "China_1_", "Norway", "Byelarus", "Ukraine", "Moldova", "Georgia", "Armenia", "Oman", "Eritrea", "Central_African_Republic", "Yeman", "Somalia", "Ethiopia", "Guinea-Bissau", "Philippines", "Japan", "Senegal", "Gambia_The");
    </script>
    
    
     <script type="text/ecmascript">

<!-- ne marche pas très bien (le curseur ne bouge pas) mais pas très grave car je ne vais pas prendre ce cursuer, mais le code js de sciptaculous
-->

//<![CDATA[
function film() {
if (lire_film==1 && 2003>slider[1].val){
  slider[1].val=slider[1].val+1
  var timer = setTimeout("film()",500);
  //output1.value=slider[1].val;
  setBoxValue(slider[1].val, 1)
  drawSliderByVal(slider[1].val)
  //b.value=slider[1].val;
  var b=document.getElementById('output1');
	b.value=slider[1].val;
  }
else slider[1].val= 1945
}
//]]>

     </script>    
  </head>

<body>


    <script type="text/ecmascript">
        bascule_volet_navig_val=0;
        function bascule_volet_navig()
          {bascule_volet_navig_val=1-bascule_volet_navig_val;
          document.getElementById("bascule_volet_navig_img").src="images/navig/fermer" + bascule_volet_navig_val +".gif";
          };

    </script>


<!--
<%= image_tag("navig/fermer.gif",
  :onclick => visual_effect(:toggle_blind, 'volet_navig',   :duration => 1.0, :scaleX => true, :scaleY => false)   )  %>

comment combiner ça avec ce qui suit ?
visual_effect(:toggle_appear, 'pays2', :duration => 1.0)

<img id="essai2" src="/images/navig/bd.png" onclick="document.getElementById(&quot;essai3&quot;).style.visibility=&quot;visible&quot;"/>

<img style="visibility: hidden;" id="essai3" src="/images/navig/bg.png" onclick="document.getElementById(&quot;essai2&quot;).src=&quot;/images/navig/hg.png&quot;"/>

<div onclick="Effect.toggle(&quot;volet_navig&quot;,'appear',{duration:1.0});">Volet navig</div>

<%= content_tag 'div', 'Masquer navig',
  :onclick => visual_effect(:toggle_blind, 'volet_navig', :duration => 1.0, :scaleX => true, :scaleY => false)  %>
-->
         
<!--
 :with => "'id=' + escape(pays_survole)")
-->
<!--grâce au "position:relative;" du div ancêtre, on place ce div par rapport à l'ancêtre  -->

<table>
  
    <tr valign="top">


      <img id="bascule_volet_navig_img" alt="Fermer" onclick="Effect.toggle(&quot;volet_navig&quot;,'blind',{duration:1.0, scaleX:false , scaleY: true });setTimeout('bascule_volet_navig()',800);" src="/images/navig/fermer0.gif" />

      
      <div id="volet_navig"> <!-- style="position: absolute; top:10; left: 10; z-index=2" -->
      
      <td>
        <%= render :partial => "navig" %>
        <img  id="navig_on_off" style="position: absolute; top:-10; left: -10;" src="/images/navig/bd.png" 
        onclick="document.getElementById(&quot;navig_on_off&quot;).src=&quot;/images/navig/hg.png&quot;"/>
        <!--
          <img style="visibility: hidden;" id="essai4" src="/images/navig/bg.png"
          onclick="document.getElementById(&quot;essai2&quot;).src=&quot;/images/navig/hg.png&quot;"/>
        -->
       </td> 
       <td>
       </td>
       <td  valign="top">  
                <span onclick="lire_film=1;slider[1].val= 1945;film();">Start movie (1946-2003)</span>
                <br/>
                <span onclick="lire_film=0;">Stop  movie</span>
       </td> 
       <td valign="top"> 
        
        <form name="hilite_form" action="">
          <!--   Cliquez sur la bande entre 1946 et 2003 pour déplacer le curseur    -->
          <br/>
          Year:
          <input id="output1" size="3" /> ;   <input id="nompays" size="1" style="text-align:right" /> countries in civil war.
          <!--
          <input type="button" onClick="animation(1)"></input>
          -->
        </form>
        <br/>
        Country/zone: <%= text_field_tag :pays2 %>
        </td>
      </div>
    </tr>
    <tr valign="top">
      <div id="cadre_carte" class="cadre_carte" style="left:10px; top: 10px; width:600px; height:300px;
      position: relative; overflow: hidden;   background-color: #B4DAF6; "  >
      <%= render :partial => "guy_carte_"+@browser %>
      </div>
    </tr>
  
</table>



<%= observe_field(:pays2, :frequency => 0.1, 
         :update => 'tabl_donnees', :url => 
         { :controller => 'carte', :action=> 'show_over' }, 
        :with => "'id=' + $('pays2').value+'&annee='+ $('output1').value") %>

<table style='text-align: center; width: 730px;' border="0">

  <tr>
    <td style='width: 160px; background-color=red;'>1946</td>
    <td>
    	<div class="slider" id="slider01">
    		<div class="left"></div>
    		<div class="right"></div>
    		<img src="images/slider/knob.png" width="20" height="15" />
    	</div>
    </td>
    <td>2003</td>
  </tr>
</table>

<div id="tabl_donnees"></div>

</body>
</html>