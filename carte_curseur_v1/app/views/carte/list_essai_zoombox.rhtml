<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<link rel="stylesheet" type="text/css" href="stylesheets/slider.css"/>
<script type="text/ecmascript" src="javascripts/slider/addanevent.js"></script>
<script type="text/ecmascript" src="javascripts/slider/slider.js"></script>
<script type="text/ecmascript" src="javascripts/slider/slider-setup.js"></script>
<script type="text/ecmascript" src="javascripts/donnees_conflits.js"></script>
<script type="text/ecmascript" src="javascripts/donnees.js"></script>
<script type="text/ecmascript" src="javascripts/zones_conflits.js"></script>

<STYLE>

</STYLE>

<script type="text/ecmascript">
// width="600" height="400"  (taille de la zone de carte)
img_w=600
img_h=400

 function startRubber (evt) {
     var zoombox = document.getElementById("zoombox");
     zoombox.setAttributeNS(null,"width",10);
     zoombox.setAttributeNS(null,"height",10);

newx=(evt.clientX / img_w)*w_org + (x_org-w_org/2);
newy=(evt.clientY / img_h)*h_org + (y_org-h_org/2)-40; // ATTENTION, dépend de la position 
//alert("sourisx:"+evt.clientX+" img_w:" + img_w + " w_org:" +w_org +" x_org:"+x_org+ " newx:"+newx);
   zoombox.setAttributeNS(null,"x",newx );
      zoombox.setAttributeNS(null,"y",newy );
//   zoombox.setAttributeNS(null,"y",evt.clientY + 'px');
     zoombox.setAttributeNS(null,"visibility",'visible');               
//     zoombox.style.left = evt.clientX + 'px';
//     zoombox.style.top = evt.clientY + 'px';
//     zoombox.style.visibility = 'visible';
     document.captureEvents(Event.MOUSEMOVE);
   document.onmousemove = moveRubber;
 }
 function moveRubber (evt) {
     var r = document.getElementById('monde');
     r.style.width = evt.clientX - parseInt(r.style.left);
     r.style.height = evt.clientY - parseInt(r.style.top);
//alert(evt.clientX);
var c=document.getElementById('nompays');
c.value = evt.clientX
//document.getElementById("zoombox").setAttributeNS(null,"width",evt.clientX);


  
 }
 function stopRubber (evt) {
   if (document.layers)
     document.releaseEvents(Event.MOUSEMOVE);
   document.onmousemove = null;
 }
 document.onmousedown = startRubber;
 document.onmouseup = stopRubber;


function curseurPays(val, box) {
    var b=document.getElementById('output'+box);
	val=Math.round(val);
	b.value=val;
	//toggle_layer_number(val);
      }
var pays= new Array ("Serbia", "Slovenia", "Montenegro", "Croatia", "Macedonia", "Bosnia_and_Herzegovina", "Cyprus_1_", "Luxembourg", "United_Arab_Emirates", "Qatar", "Azerbaijan", "Jordan", "Lebanon", "Netherlands", "Belgium", "Canada", "Greenland_1_", "Papua_New_Guinea", "Cambodia", "Vietnam", "Korea_x002C__Democratic_People_x0027_s_Republic_of", "Korea_x002C__Republic_of", "Mongolia", "Kazakhstan", "Taiwan", "Brunei", "Butan", "Bangladesh", "Afghanistan", "Kyrgyzstan", "Burkina_Faso", "Belize", "Indonesia", "Guatemala", "Dominican_Republic", "Burma", "Laos", "Malaysia", "Cuba", "Tajikistan", "Jamaica", "Thailand", "Nepal", "Uzbekistan", "Malawi", "Turkmenistan", "Puerto_Rico", "Russia_2_", "Sri_Lanka", "Nicaragua", "Madagascar", "Zambia", "El_Salvador", "Honduras", "Haiti", "Costa_Rica", "Panama", "Chile", "Bolivia", "Paraguay", "Uruguay", "Peru", "Brazil", "Mexico", "Kenya", "Tanzania", "Mozambique", "Zaire", "Angola", "Namibia", "Congo", "Cameroon", "Gabon", "Equatorial_Guinea", "Botswana", "Zimbabwe", "Uganda", "Burundi", "Guyana", "Suriname", "French_Guiana", "Ecuador", "Colombia", "Venezuela", "Benin", "Ghana", "Togo", "Guinea", "Liberia", "Sierra_Leone", "Nigeria", "Lesotho", "Swaziland", "Ivory_Coast", "Rwanda", "Western_Sahara", "Niger", "Sudan", "Lybia", "Chad", "Mali", "Mauritania", "Tunisia", "Algeria", "Morocco", "India", "New_Zealand", "Argentina", "United_Kingdom_1_", "United_States_1_", "Italy_1_", "Denmark_1_", "Egypt_1_", "South_Africa", "Finland", "France", "Portugal", "Ireland", "Iceland", "Germany", "Poland", "Australia_1_", "Turkey_1_", "Russia", "Saudi_Arabia", "Slovakia", "Spain_1_", "Israel", "Iraq", "Greece", "Romania", "Bulgaria", "Syria", "Albania", "Switzerland", "Czech_Republic", "Austria", "Kuwait", "Iran", "Estonia", "Latvia", "Hungary", "Pakistan", "Sweden", "Lithuania", "China_1_", "Norway", "Byelarus", "Ukraine", "Moldova", "Georgia", "Armenia", "Oman", "Eritrea", "Central_African_Republic", "Yeman", "Somalia", "Ethiopia", "Guinea-Bissau", "Philippines", "Japan", "Senegal", "Gambia_The");
</script>
</head>
<body>
<!--
onload="modifsvg()"
-->
<a href="#" onclick="zoom(1.3)">Zoom in</a>
<a href="#" onclick="zoom(1/1.3)">Zoom out</a>


<table style="text-align: center; width: 100px;" border="1"  cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td><a href="#" onclick="pan(-.1,-.1)">\</a></td>
      <td><a href="#" onclick="pan(0,-.1)">haut</a></td>
      <td><a href="#" onclick="pan(.1,-.1)">/</a></td>
    </tr>
    <tr>
      <td><a href="#" onclick="pan(-.1,0)">gauche</a></td>
      <td></td>
      <td><a href="#" onclick="pan(.1,0)">droite</a></td>
    </tr>
    <tr>
      <td><a href="#" onclick="pan(-.1,.1)">/</a></td>
      <td><a href="#" onclick="pan(0,.1)">bas</a></td>
      <td><a href="#" onclick="pan(.1,.1)">\</a></td>
    </tr>
  </tbody>
</table>






<script type="text/ecmascript">
// viewBox="-20 -90 160 160"
// = coordonnées x et y du point en haut à gauche, suivies de largeur et hauteur

x_org = 60 //milieu d'origine (x)
y_org = -10 //milieu d'origine (y)
w_org = 230 //largeur d'origine (devrait être 160) (???) (sino zoombox incorrecte???!!)
h_org = 160 //hauteur d'origine (devrait être 160) (???) (sino zoombox incorrecte???!!)

function pan(dx,dy)
{
x_org=x_org+dx*(w_org+h_org);
y_org=y_org+dy*(w_org+h_org);
n_x=x_org-w_org/2;
n_y=y_org-h_org/2;
new_vb = n_x + " " + n_y + " " + w_org + " " + h_org;
document.getElementById("monde").setAttributeNS(null,"viewBox",new_vb);
}

function zoom(facteur)
{
//alert(facteur);
w_org=w_org/facteur;
h_org=h_org/facteur;
n_x=x_org-w_org/2;
n_y=y_org-h_org/2;

new_vb = n_x + " " + n_y + " " + w_org + " " + h_org;
//alert(new_v);
//alert(document.getElementById("monde").getAttributeNS(null,"viewBox"));
document.getElementById("monde").setAttributeNS(null,"viewBox",new_vb);
}
</script> 


<svg
onmousedown = "startRubber()" onmouseup = "stopRubber()"
 id="monde" xmlns="http://www.w3.org/2000/svg" width="600" height="400" viewBox="-20 -90 160 160">


<%= render :partial => "map_cw1_extrait" %>
<rect id="zoombox" x="0px" y="0px" width="20" height="10" 
style="fill:rgb(0,0,255);stroke-width:1px;stroke:rgb(0,0,0);fill-opacity:0.1;stroke-opacity:0.9 "/>

<rect id="box" x="-20" y="-90" width="240" height="160" 
style="visibility:hidden;fill:rgb(0,0,255);stroke-width:1px;stroke:rgb(0,0,0);fill-opacity:0.1;stroke-opacity:0.9 "/>



    </svg>


<script type="text/ecmascript"> 
function modifsvg() {
var svgobj =document.getElementById('Canada');
//svgobj.setAttributeNS(null,'visibility','visible');
svgobj.setAttributeNS(null,'fill','red');
}
</script>

  <form name="hilite_form" action="">
<table style="text-align: center; width: 70%;" border="0">
<TR>
Cliquez sur la bande entre 1946 et 2003 pour déplacer le curseur
<TD>1946</TD>
<TD>
	<div class="slider" id="slider01">
		<div class="left"></div>
		<div class="right"></div>
		<img src="images/slider/knob.png" width="31" height="15" />
	</div>
</TD>
<TD>2003</TD>
</TR>
</table>


Année:
<input id="output1" />    Nombre de pays en guerre civile: <input id="nompays"/>
<!--
<input type="button" onClick="animation(1)"></input>
-->
</form>


</body>
 </html>